name: remote clone


on:
  push:
    branches:
      - main
  schedule:
   - cron: '5 16 * * *'  # 本地时间每天的 1:00 执行
env:
    TZ: Asia/Shanghai
jobs:
   remote_clone:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout code
              uses: actions/checkout@v2
            - name: 下载广告reject
              run: |
                if ! curl -L --silent --output ./Reject.list https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-surge2.txt; then
                    echo "Failed to download the file."
                    exit 1
                fi


                # 备份原始文件
                if [ -f "./filter_remote/Reject.list" ]; then
                    mv ./filter_remote/Reject.list ./bak/Reject.list.bak
                fi

                # 移动文件
                if ! mv ./Reject.list ./filter_remote/Reject.list; then
                    echo "Failed to move the file."
                    exit 1
                fi

                echo "File successfully downloaded, backed up, and moved."
                               